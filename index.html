<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>cmd_portfolio.exe</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
      :root {
        --bg-color: #000000;
        --text-main: #f5f5f5;
        --text-dim: #aaaaaa;
        --accent-green: #00ff00;
        --accent-blue: #00a2ff;
        --accent-military: #3a5f0b;
        --cursor: #ffffff;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html,
      body {
        height: 100%;
      }

      body {
        background-color: var(--bg-color);
        color: var(--text-main);
        font-family: "Lucida Console", "Consolas", "Courier New", monospace;
        overflow: hidden;
      }

      .pane-body::-webkit-scrollbar {
        width: 0px;
        height: 0px;
      }

      .pane-body {
        scrollbar-width: none; /* Firefox */
        -ms-overflow-style: none; /* IE/Edge */
      }

      @keyframes hintGlitch {
        0% {
          opacity: 0;
          transform: translateX(0);
        }
        20% {
          opacity: 1;
          transform: translateX(-1px);
        }
        40% {
          transform: translateX(1px);
          filter: hue-rotate(30deg);
        }
        60% {
          transform: translateX(-1px);
          filter: hue-rotate(-20deg);
        }
        80% {
          transform: translateX(1px);
        }
        100% {
          opacity: 1;
          transform: translateX(0);
          filter: none;
        }
      }

      /* --- screens root --- */
      #app-root {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 16px;
      }

      .screen {
        width: 100%;
        height: 100%;
        max-width: 1100px;
        max-height: 650px;
        margin: 0 auto;
      }

      /* ===== BOOT SCREEN ===== */
      #boot-screen {
        border: 2px solid var(--accent-blue);
        background: #000;
        padding: 12px 16px;
        overflow: hidden;
        box-shadow: 0 0 10px rgba(0, 162, 255, 0.3);
      }

      #boot-output {
        font-size: 13px;
        line-height: 1.35;
        white-space: pre-wrap;
      }

      .blink {
        animation: blink 1s steps(2, start) infinite;
      }

      @keyframes blink {
        0%,
        50% {
          opacity: 1;
        }
        50.01%,
        100% {
          opacity: 0;
        }
      }

      /* ===== YIN INTRO ===== */
      #yin-screen {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        border: 2px solid var(--accent-blue);
        background: #000;
        padding: 24px;
        text-align: center;
        box-shadow: 0 0 12px rgba(58, 95, 11, 0.6);
      }

      .yin-art {
        font-size: 11px;
        line-height: 11px;
        white-space: pre;
        cursor: pointer;
        margin-bottom: 16px;
      }

      #yin-hint {
        margin-top: 12px;
        font-size: 13px;
        color: var(--text-dim);
      }

      .glitch-char {
        animation: glitch 0.15s linear alternate;
      }

      @keyframes glitch {
        0% {
          opacity: 0.2;
          transform: translateX(-1px);
        }
        100% {
          opacity: 1;
          transform: translateX(1px);
        }
      }

      /* ===== MAIN TERMINAL ===== */
      #main-screen {
        display: flex;
        flex-direction: column;
        border: 2px solid var(--accent-blue);
        background: #000;
        box-shadow: 0 0 14px rgba(58, 95, 11, 0.5);
      }

      .term-titlebar {
        background: #000080;
        color: #f5f5f5;
        padding: 4px 8px;
        font-size: 13px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        border-bottom: 1px solid var(--accent-military);
      }

      .term-titlebar span {
        white-space: nowrap;
      }

      .term-body {
        flex: 1;
        border-top: 1px solid #003399;
        padding: 8px 10px;
        display: grid;
        grid-template-columns: 260px 1fr;
        gap: 8px;
        overflow: hidden;
      }

      .pane {
        border: 1px solid var(--accent-military);
        padding: 6px 7px;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        background: #000;
        box-shadow: inset 0 0 6px rgba(58, 95, 11, 0.4);
      }

      .pane-header {
        font-size: 12px;
        color: var(--accent-green);
        margin-bottom: 4px;
      }

      .pane-body {
        font-size: 13px;
        color: var(--text-main);
        flex: 1;
        overflow-y: auto;
        line-height: 1.35;
        white-space: pre-wrap;
      }

      /* left menu */
      #menu-body {
        font-size: 13px;
      }

      .menu-item-btn {
        background: transparent;
        border: none;
        color: inherit;
        font: inherit;
        text-align: left;
        padding: 0;
        cursor: pointer;
        display: block;
        margin-bottom: 0;
      }

      .menu-item-btn:hover {
        color: var(--accent-green);
      }

      #prompt-line {
        margin-top: 10px;
        color: var(--accent-green);
      }

      .prompt-path {
        color: var(--text-main);
      }

      /* right content */
      #content-body {
        font-size: 13px;
      }

      .typing-cursor {
        display: inline-block;
        width: 8px;
        height: 1em;
        background-color: var(--cursor);
        animation: blink 0.6s steps(2, start) infinite;
        vertical-align: bottom;
      }

      pre {
        font-family: inherit;
        font-size: 12px;
        white-space: pre;
      }

      a {
        color: var(--accent-green);
        text-decoration: none;
      }

      a:hover {
        text-decoration: underline;
      }

      /* bottom console bar */
      .term-footer {
        border-top: 1px solid #003399;
        padding: 4px 8px;
        font-size: 11px;
        color: var(--text-dim);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      #device-info {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      #lang-toggle,
      #theme-toggle {
        cursor: pointer;
      }

      #volume-control {
        margin-right: 10px;
      }

      .vol-btn {
        cursor: pointer;
        color: var(--accent-green);
      }

      .vol-btn:hover {
        text-decoration: underline;
      }

      @media (max-width: 900px) {
        .term-body {
          grid-template-columns: 1fr;
          grid-template-rows: auto auto;
        }
      }

      @keyframes blink {
        0%,
        50% {
          opacity: 1;
        }
        50.01%,
        100% {
          opacity: 0;
        }
      }
    </style>
  </head>

  <body>
    <div id="app-root"></div>

    <!-- sonido suave de teclado -->
    <audio
      id="keySound"
      src="https://assets.mixkit.co/sfx/preview/mixkit-soft-typing-on-computer-keyboard-2533.mp3"
      preload="auto"
    ></audio>

    <script>
      /* ========= UBICACIÓN / TEMPERATURA ========= */
      let deviceCity = "UNKNOWN";
      let deviceTemp = "--";

      function refreshDeviceInfoDom() {
        const el = document.getElementById("device-info");
        if (!el) return;
        el.textContent = `DEVICE: ${deviceCity} | TEMP: ${deviceTemp}°C`;
      }

      (function initLocation() {
        if (!navigator.geolocation) {
          refreshDeviceInfoDom();
          return;
        }

        navigator.geolocation.getCurrentPosition(
          async (pos) => {
            try {
              const lat = pos.coords.latitude;
              const lon = pos.coords.longitude;
              const url =
                "https://api.open-meteo.com/v1/forecast?latitude=" +
                lat +
                "&longitude=" +
                lon +
                "&current_weather=true";

              const res = await fetch(url);
              const data = await res.json();
              const temp =
                data &&
                data.current_weather &&
                typeof data.current_weather.temperature !== "undefined"
                  ? data.current_weather.temperature
                  : "--";

              deviceCity = "Local";
              deviceTemp = temp;
              refreshDeviceInfoDom();
            } catch (e) {
              refreshDeviceInfoDom();
            }
          },
          () => {
            refreshDeviceInfoDom();
          }
        );
      })();

      /* ========= SONIDO TECLADO ========= */
      const keySound = document.getElementById("keySound");

      function playKey() {
        if (!keySound) return;
        keySound.currentTime = 0;
        keySound.play();
      }

      /* ========= CONSTANT ASCII ART ========= */
      const YINYANG_ART = String.raw`
                           __....__
                       .gd$$$$$$$$$$bp.
                    .-"^^^T$$$$$$$$$$$$$p.
                  .'       "^T$$$$$$$$$$$$b.
                .'            \`T$$$$$$$$$$$$b.
               /     .d$$b.     T$$$$$$$$$$$$$b
              /     d$$$$$$b     $$$$$$$$$$$$$$b
             :     :$$$$$$$$;    :$$$$$$$$$$$$$$;
             ;      T$$$$$$P     :$$$$$$$$$$$$$$$
            :        "^$$^"      $$$$$$$$$$$$$$$$;
            ;                   d$$$$$$$$$$$$$$$$$
            |                 .d$$$$$$$$$$$$$$$$$$
            ;                d$$$$$$$$$$$$$$$$$$$$
            :               :$$$$$$P^""^T$$$$$$$$;
             ;              $$$$$$P      T$$$$$$$
             :              $$$$$$        $$$$$$;
              \             :$$$$$b      d$$$$$P
               \             T$$$$$bp..gd$$$$$P
                \`.            \`T$$$$$$$$$$$$P'
                  \`.            "^$$$$$$$$P'
                    "-.            "^^T$P'
                       "--...____...--"
`;

      const ASCII_ME = String.raw`                                      
 ******#***=   @@@@@@@@@@.   .=***************** 
 ##***##*=  =@@@@#=:*%@@@@@@@:  =#*####**#****## 
 *******: @@@@*@@%@@@@*#=%@@@@@% -************** 
 ******= @@@*%@@@@@@#%@@@.===*@@@ ************** 
 ****** *@@%@@@@@@@@%@@:+@@@@@@@@ -************* 
 *#***= @@@@@@@@@@%@@@@@@@@#@%:@@@ *##**####**## 
 *****: @@@@@@@@@@@@%--*=:..=@@*@@:*##**##***### 
 *****:-@@@%*#@@@@*=%%.    =:%@@@= ************* 
 *****= @@=======:==.:@@@@@@-.**@#:***#********* 
 ****** %@:@@@@@%%@@@@@#%=**@=#@@+.*###***##**** 
 *****#- @***%@@@@@ +@@@@@%#***@ @#+************ 
 ******+ @@@@%@@@@@.:   .:+*#%*%@@+=************ 
 ******* @@%@@@@@*.-==*@+:::=*%*%@-************* 
 ******* @@@#.*@#@*--#*@@@@@=*%***=************* 
 ###***#= @@@@@@@@@@@@   -@@**%@@#+******#****## 
 ******** @@@%%**%@@%@@@@@@@+*@.:=************** 
 ********: @@%@@@%%%:..   #@=@@:**************** 
 *********- @@@*#@%+*%@%**+*@%%-***************# 
 **********: @@@%%@@@@@#%*+%%*%*=**###***#****## 
 ***********- :@%@@      =@@#*#@-.    :=**#***** 
 ************= @@%@@@@@@@@%***#%**@@@%+      :+* 
 ************+ .@@@@@@@@:=*###+::@@%@@@@@@@@@*   
 *#*******:    %@%%%@%+=-*%*=::@@@%%%%%%%%@@@@@@:
 ****#+.   @@@@@@@%#%@@@%*=.*@@@%#%%%%%%%%%%%@%% 
 ***:   @@@@@@==*****=*%@@@@@%**#%%%%%%%%%%@%@%% 
     @@@@@@%%@@@@@@@@@@@@@%%#%%%%%%%%%%%%%%@%%@% 
 :@@@@@%%##%%@@@@+-=**#%#%%@%@@%@@%%%%%%%%#@@:%**
@@@@@@@@@@@@@@@#*%@%%#%%%%%%%%%%%%%%%%%%%%#*@@#-*
*@@@@@@@@@@@@#*%%%@%%%%%%%%%%%%%%%%%%%%%%%%#*=@%+
`;

      const Data = {
        i18n: {
          es: {
            bootLines: [
              "jcsa87 Terminal OS [Versión 5.1.2600]",
              "(C) jcsa87. All rights reserved.",
              "",
              "C:\\> inicializando entorno de portafolio...",
              "C:\\> cargando módulos: about.dll stack.dll projects.dll contact.dll",
              "C:\\> configurando interfaz de terminal...",
              "C:\\> listo.",
              "",
              "Presiona cualquier tecla para continuar...",
            ],
            title: "C:\\jcsa87\\system87\\portafolio.exe",
            menuHeader: "// navegación",
            menuItems: [
              "01. sobre_mí",
              "02. tecnologías",
              "03. proyectos",
              "04. contacto",
            ],
            prompt: "Haz clic en una opción.",
            promptPath: "C:\\portafolio>",
            consoleReady: "Sistema listo.",
            langLabel: "[ eng ]",
            themeLabel: "[ light_mode ]",
            welcomeMessage:
              "Bienvenido a jcsa87 Terminal OS.\nSelecciona una sección en el panel izquierdo para continuar.",
          },
          en: {
            bootLines: [
              "jcsa87 Terminal OS [Version 5.1.2600]",
              "(C) jcsa87. All rights reserved.",
              "",
              "C:\\> initializing portfolio environment...",
              "C:\\> loading modules: about.dll stack.dll projects.dll contact.dll",
              "C:\\> setting up terminal interface...",
              "C:\\> done.",
              "",
              "Press any key to continue...",
            ],
            title: "C:\\jcsa87\\system87\\portfolio.exe",
            menuHeader: "// navigation",
            menuItems: [
              "01. about_me",
              "02. tech_stack",
              "03. projects",
              "04. contact",
            ],
            prompt: "Click an option.",
            promptPath: "C:\\portfolio>",
            consoleReady: "System ready.",
            langLabel: "[ spa ]",
            themeLabel: "[ dark_mode ]",
            welcomeMessage:
              "Welcome to jcsa87 Terminal OS.\nSelect a section from the left panel to continue.",
          },
        },

        modules: {
          about: {
            es: `
C:\\portafolio> type about.txt


[ ascii_loaded: user_avatar.sys ]

<pre id="ascii-me" style="margin-bottom: 12px;"></pre>

usuario: juan_cruz_senicen_acosta  
rol: estudiante_sistemas / dev_en_formación  
stack: sql / mysql / sqlserver / php / c# / java / javascript / nextjs / tailwind  
enfoque: arquitectura_limpia, datos_estructurados, diseño_de_sistemas

experiencia:
  - sistemas_de_gestion
  - paneles_administrativos
  - autenticación_segura
  - bases_normalizadas
  - reportes_y_métricas

intereses:
  - filosofía/espiritualidad
  - minimalismo
  - fitness
  - software_craftsmanship

nota:
  aún descubriendo mi camino como desarrollador.
  sin orientación cerrada (backend / frontend / web).
  comprometido con aprender y mejorar.
`,
            en: `
C:\\portfolio> type about.txt

[ ascii_loaded: user_avatar.sys ]

<pre id="ascii-me" style="margin-bottom: 12px;"></pre>

user: juan_cruz_senicen_acosta  
role: systems_student / dev_in_progress  
stack: sql / mysql / sqlserver / php / c# / java / javascript / nextjs / tailwind  
focus: clean_architecture, structured_data, full_system_design

experience:
  - management_systems
  - admin_panels
  - secure_auth
  - normalized_databases
  - reports_and_metrics

interests:
  - philosophy/spitiauality
  - minimalism
  - fitness
  - software_craftsmanship

note:
  still exploring my path as a developer.
  not fixed on backend / frontend / even strict web yet.
  committed to learning and improving.
`,
          },
          stack: {
            es: `
C:\\portafolio> type stack.json

{
  "lenguajes": ["java", "c#", "php", "javascript", "sql"],
  "frontend": ["html", "css", "bootstrap", "nextjs", "tailwind"],
  "backend": ["php (codeigniter)", "c# (windows forms)", "t-sql"],
  "bases_de_datos": ["sql server", "mysql"],
  "tools": ["git", "vercel", "figma", "photoshop", "visual studio"]
}
`,
            en: `
C:\\portfolio> type stack.json

{
  "languages": ["java", "c#", "php", "javascript", "sql"],
  "frontend": ["html", "css", "bootstrap", "nextjs", "tailwind"],
  "backend": ["php (codeigniter)", "c# (windows forms)", "t-sql"],
  "databases": ["sql server", "mysql"],
  "tools": ["git", "vercel", "figma", "photoshop", "visual studio"]
}
`,
          },
          projects: {
            es: `
C:\\portafolio> dir proyectos

[ academic_projects ]
  - BaseDeDatosI_Proyecto
    diseño y modelado de base de datos relacional para un sistema de gestión.
  - nikeproject
    aplicación web (php + mysql) orientada a ventas / gestión tipo e-commerce.
  - nikeprojectdesktop
    versión de escritorio (c# + sql server) con paneles, reportes y autenticación.
  - proyectos_taller_II (taller.II, prácticos)
    ejercicios y prácticas de programación en c# y windows forms.

[ personal_projects ]
  - portfolio
    este mismo terminal estilo windows xp / cmd, desplegado como portafolio personal.
  - prototipo_padel
    prototipo de sistema para reservas / gestión relacionado al pádel.
  - misc_repos
    pequeñas pruebas, experimentos y ejercicios varios.

para ver el código fuente completo:
  github : https://github.com/jcsa87
`,
            en: `
C:\\portfolio> dir projects

[ academic_projects ]
  - BaseDeDatosI_Proyecto
    relational database design and modeling for a management system.
  - nikeproject
    web app (php + mysql) focused on sales / management, e-commerce oriented.
  - nikeprojectdesktop
    desktop version (c# + sql server) with dashboards, reports and secure auth.
  - taller_II / prácticos
    c# / windows forms exercises and academic practice.

[ personal_projects ]
  - portfolio
    this windows xp / cmd-style terminal portfolio.
  - prototipo_padel
    prototype system related to pádel reservations / management.
  - misc_repos
    small experiments, utilities and learning exercises.

for full source code:
  github : https://github.com/jcsa87
`,
          },
          contact: {
            es: `
C:\\portafolio> net user contacto

email    : juancruzsenicenacosta@gmail.com
github   : https://github.com/jcsa87
discord  : promesasimprudentes
linkedin : https://www.linkedin.com/in/juan-cruz-senicen-acosta-a93430203/

cv       : <a href="assets/JuanCruzSenicenAcosta_CV.pdf" download>descargar_cv.pdf</a>  (próximamente)

(para abrir los enlaces, haz clic con el mouse)
`,
            en: `
C:\\portfolio> net user contact

email    : juancruzsenicenacosta@gmail.com
github   : https://github.com/jcsa87
discord  : promesasimprudentes
linkedin : https://www.linkedin.com/in/juan-cruz-senicen-acosta-a93430203/

cv       : <a href="assets/JuanCruzSenicenAcosta_CV.pdf" download>download_resume.pdf</a>  (coming soon)

(click the links to open them)
`,
          },
        },
      };

      /* ========= APP ========= */
      const App = {
        state: {
          lang: "en", // por defecto en inglés
          theme: "dark",
          mode: "boot", // boot | yin | main
          volume: 0.15,
          skipIntro: false,
        },
        intervals: [],

        init() {
          if (keySound) keySound.volume = this.state.volume;
          this.renderBootScreen();
          this.startBootSequence();
        },

        /* --- utilities --- */
        clearTimers() {
          this.intervals.forEach((id) => clearInterval(id));
          this.intervals = [];
        },

        updateVolumeDisplay() {
          const lvlEl = document.getElementById("volume-level");
          if (lvlEl) {
            const percent = Math.round(this.state.volume * 100);
            lvlEl.textContent = percent;
          }
          if (keySound) keySound.volume = this.state.volume;
        },

        changeVolume(delta) {
          this.state.volume = Math.min(
            1,
            Math.max(0, this.state.volume + delta)
          );
          this.updateVolumeDisplay();
        },

        /* ================= BOOT ================= */
        renderBootScreen() {
          const root = document.getElementById("app-root");
          root.innerHTML = `
            <div id="boot-screen" class="screen">
              <div id="boot-output"></div>
            </div>
          `;
        },

        async startBootSequence() {
          const t = Data.i18n[this.state.lang];
          const out = document.getElementById("boot-output");
          const lines = t.bootLines;
          out.textContent = "";

          for (let i = 0; i < lines.length - 1; i++) {
            await this.typeLine(out, lines[i] + "\n", 35);
          }

          // last line ("press any key...")
          const last = lines[lines.length - 1];
          const lineSpan = document.createElement("span");
          out.appendChild(lineSpan);
          await this.typeLine(lineSpan, last, 25);

          const blinkSpan = document.createElement("span");
          blinkSpan.className = "blink";
          blinkSpan.textContent = "_";
          out.appendChild(blinkSpan);

          const handler = () => {
            window.removeEventListener("keydown", handler);
            this.toYinScreen();
          };
          window.addEventListener("keydown", handler);
        },

        typeLine(element, text, speed) {
          return new Promise((resolve) => {
            let i = 0;
            const id = setInterval(() => {
              element.textContent += text[i];

              if (text[i] !== " ") playKey();

              i++;
              if (i >= text.length) {
                clearInterval(id);
                resolve();
              }
            }, speed);
            this.intervals.push(id);
          });
        },

        /* ================= YIN SCREEN ================= */
        skipYin() {
          if (this.state.mode !== "yin") return;
          this.state.skipIntro = true;
          this.toMainScreen();
        },

        toYinScreen() {
          this.clearTimers();
          this.state.mode = "yin";
          this.state.skipIntro = false;

          const root = document.getElementById("app-root");
          const t = Data.i18n[this.state.lang];
          root.innerHTML = `
            <div id="yin-screen" class="screen">
              <div id="yin-art" class="yin-art"></div>
              <div id="yin-hint" style="opacity:0;"></div>
            </div>
          `;

          const artEl = document.getElementById("yin-art");
          this.typeYinArt(artEl, 1);

          // cualquier click o ENTER saltea la intro
          root.addEventListener("click", () => this.skipYin());
          window.addEventListener("keydown", (e) => {
            if (e.key === "Enter") {
              this.skipYin();
            }
          });
        },

        async typeYinArt(element, speed) {
          element.innerHTML = "";
          const text = YINYANG_ART;
          const colors = [
            "var(--text-main)",
            "var(--accent-green)",
            "var(--accent-blue)",
          ];

          for (let i = 0; i < text.length; i++) {
            if (this.state.skipIntro) return;

            const ch = text[i];

            if (ch === "\n") {
              element.innerHTML += "<br>";
              continue;
            }

            const isSpace = ch === " ";
            const useGlitch = !isSpace && Math.random() < 0.12;
            const color = colors[Math.floor(Math.random() * colors.length)];
            const safeChar = ch === "<" ? "&lt;" : ch === ">" ? "&gt;" : ch;

            if (useGlitch) {
              element.innerHTML += `<span class="glitch-char" style="color:${color}">${safeChar}</span>`;
            } else {
              element.innerHTML += isSpace
                ? "&nbsp;"
                : `<span style="color:${color}">${safeChar}</span>`;
            }

            if (!isSpace && Math.random() < 0.25) playKey();

            if (speed > 0) {
              await new Promise((r) => setTimeout(r, speed));
            }
          }

          if (this.state.skipIntro) return;

          const hintEl = document.getElementById("yin-hint");
          if (hintEl) {
            const hintText =
              App.state.lang === "es"
                ? "[ENTER] para iniciar el sistema"
                : "[ENTER] to start the system";

            hintEl.textContent = hintText;
            hintEl.style.opacity = 1;
            hintEl.style.animation = "hintGlitch 0.45s linear";

            playKey();
            setTimeout(playKey, 120);
          }
        },

        /* ================= MAIN TERMINAL ================= */
        toMainScreen() {
          this.clearTimers();
          this.state.mode = "main";

          const root = document.getElementById("app-root");
          const t = Data.i18n[this.state.lang];

          root.innerHTML = `
            <div id="main-screen" class="screen">
              <div class="term-titlebar">
                <span>${t.title}</span>
                <span>- cmd_portfolio</span>
              </div>
              <div class="term-body">
                <section class="pane">
                  <div class="pane-header">${t.menuHeader}</div>
                  <div id="menu-body" class="pane-body"></div>
                </section>
                <section class="pane">
                  <div class="pane-header">// display</div>
                  <div id="content-body" class="pane-body"></div>
                </section>
              </div>
              <div class="term-footer">
                <span id="device-info"></span>
                <span>
                  <span id="volume-control">
                    <span id="vol-down" class="vol-btn">[v-]</span>
                    &nbsp;<span id="volume-level">15</span> %&nbsp;
                    <span id="vol-up" class="vol-btn">[v+]</span>
                  </span>
                  <span id="lang-toggle">${t.langLabel}</span>
                  &nbsp;
                  <span id="theme-toggle">${t.themeLabel}</span>
                </span>
              </div>
            </div>
          `;

          refreshDeviceInfoDom();
          this.renderMenu();
          this.attachFooterEvents();
          this.setWelcomeMessage();
        },

        renderMenu() {
          const t = Data.i18n[this.state.lang];
          const body = document.getElementById("menu-body");
          if (!body) return;

          let html = "";
          t.menuItems.forEach((label, idx) => {
            const key =
              idx === 0
                ? "about"
                : idx === 1
                ? "stack"
                : idx === 2
                ? "projects"
                : "contact";
            html += `<button class="menu-item-btn" onclick="App.loadModule('${key}')">${label}</button>`;
          });

          html += `\n\n${t.prompt}\n`;
          html += `<span id="prompt-line"><span class="prompt-path">${t.promptPath}</span> _</span>`;

          body.innerHTML = html;
        },

        setWelcomeMessage() {
          const t = Data.i18n[this.state.lang];
          const out = document.getElementById("content-body");
          if (!out) return;
          const msg = "\n" + t.welcomeMessage + "\n";
          this.typeHTML(out, msg, 2);
        },

        attachFooterEvents() {
          const langToggle = document.getElementById("lang-toggle");
          const themeToggle = document.getElementById("theme-toggle");
          const volDown = document.getElementById("vol-down");
          const volUp = document.getElementById("vol-up");

          if (langToggle) {
            langToggle.onclick = () => {
              this.state.lang = this.state.lang === "es" ? "en" : "es";
              this.toMainScreen();
            };
          }

          if (themeToggle) {
            themeToggle.onclick = () => {
              this.toggleTheme();
            };
          }

          if (volDown && volUp) {
            volDown.onclick = () => this.changeVolume(-0.05);
            volUp.onclick = () => this.changeVolume(0.05);
            this.updateVolumeDisplay();
          }
        },

        toggleTheme() {
          if (this.state.theme === "dark") {
            document.body.style.backgroundColor = "#e6e6e6";
            document.body.style.color = "#000";
            this.state.theme = "light";
          } else {
            document.body.style.backgroundColor = "#000";
            document.body.style.color = "#f5f5f5";
            this.state.theme = "dark";
          }
        },

        /* --- modules --- */
        loadModule(key) {
          const mod = Data.modules[key];
          const t = mod ? mod[this.state.lang] : "";
          const out = document.getElementById("content-body");
          if (!out) return;
          this.typeHTML(out, t, 3).then(() => {
            if (key === "about") this.injectASCII();
          });
        },

        typeHTML(element, html, speed) {
          return new Promise((resolve) => {
            element.innerHTML = "";
            const cursor = document.createElement("span");
            cursor.className = "typing-cursor";
            element.appendChild(cursor);

            const parts = html.split(/(<[^>]+>)/g).filter((p) => p !== "");

            let idx = 0;
            const typeNextPart = () => {
              if (idx >= parts.length) {
                cursor.remove();
                resolve();
                return;
              }
              const part = parts[idx++];
              if (part.startsWith("<") && part.endsWith(">")) {
                cursor.insertAdjacentHTML("beforebegin", part);
                typeNextPart();
              } else {
                let i = 0;
                const id = setInterval(() => {
                  const c = part[i];
                  const chunk =
                    Math.random() < 0.02 && c !== " "
                      ? `<span class="glitch-char">${c}</span>`
                      : c;

                  cursor.insertAdjacentHTML("beforebegin", chunk);

                  if (c !== " ") playKey();

                  i++;
                  if (i >= part.length) {
                    clearInterval(id);
                    typeNextPart();
                  }
                }, speed);
                App.intervals.push(id);
              }
            };

            typeNextPart();
          });
        },

        injectASCII() {
          const asciiEl = document.getElementById("ascii-me");
          if (!asciiEl) return;
          asciiEl.textContent = "";
          const lines = ASCII_ME.split("\n");
          let i = 0;
          const id = setInterval(() => {
            if (i >= lines.length) {
              clearInterval(id);
              return;
            }
            asciiEl.textContent += lines[i] + "\n";
            playKey();
            i++;
          }, 8);
          this.intervals.push(id);
        },
      };

      /* ========= INACTIVIDAD (60s) ========= */
      let lastActivity = Date.now();
      const INACTIVITY_LIMIT = 60000;

      function resetActivity() {
        lastActivity = Date.now();
      }

      ["mousemove", "keydown", "click", "touchstart"].forEach((ev) =>
        window.addEventListener(ev, resetActivity)
      );

      setInterval(() => {
        if (Date.now() - lastActivity > INACTIVITY_LIMIT) {
          if (App.state.mode === "main") {
            App.toYinScreen();
          }
          lastActivity = Date.now();
        }
      }, 1000);

      window.App = App;
      window.onload = () => App.init();

      window.addEventListener(
        "click",
        () => {
          keySound.volume = App.state.volume;
          keySound.play().catch(() => {});
        },
        { once: true }
      );
    </script>
  </body>
</html>
